============================= test session starts ==============================
platform darwin -- Python 3.8.5, pytest-6.0.1, py-1.9.0, pluggy-0.13.1
rootdir: /Users/elainelaguerta/Dropbox/LBNL/LinDist3Flow/powerflowpy
collected 1 item

powerflowpy/tests/test_compare_opendss.py 

Testing File: powerflowpy/tests/06n3ph_unbal/06node_threephase_unbalanced.dss
OpenDSS Loads after solving, from dss.CktElement.Powers():
[49.99981466116478, 25.0002223062676, 0.0, 0.0]

Opendss Iterations: 2	Opendss Convergence: 1e-12
OpenDSS Loads after solving, from dss.CktElement.Powers():
[50.021008902813136, 14.878382876656207, -49.99999999997782, -14.880791431880832]
FBS iterations: 6	 FBS convergence:2.7876882116420945e-11	 FBS tolerance: 1e-09

COMPARE V
Max |diff|:
A.(fbs - dss)    0.000439
B.(fbs - dss)    0.000272
C.(fbs - dss)    0.000297
dtype: float64
                A.(fbs - dss)       B.(fbs - dss)       C.(fbs - dss)
sourcebus  0.000003+0.000006j  0.000003-0.000004j -0.000005-0.000001j
a01        0.000047+0.000064j  0.000038-0.000002j  0.000041+0.000059j
a02        0.000091+0.000122j  0.000073+0.000001j  0.000088+0.000118j
a03        0.000178+0.000237j  0.000144+0.000007j  0.000180+0.000236j
a04        0.000178+0.000237j  0.000000-0.000000j  0.000180+0.000236j
a05        0.000263+0.000351j  0.000208+0.000012j -0.000000+0.000000j
a06        0.000000+0.000000j  0.000271+0.000017j -0.000000+0.000000j
FBS results
                            A                   B                   C
sourcebus  1.000000+0.000000j -0.500000-0.866025j -0.500000+0.866025j
a01        0.998637+0.002775j -0.498280-0.868228j -0.502939+0.863417j
a02        0.997275+0.005551j -0.496559-0.870430j -0.505878+0.860808j
a03        0.994685+0.009408j -0.494655-0.874107j -0.510364+0.856566j
a04        0.995918+0.009440j  0.000000-0.000000j -0.510378+0.853914j
a05        0.991315+0.011647j -0.495731-0.875717j -0.000000+0.000000j
a06        0.000000+0.000000j -0.495563-0.875236j -0.000000+0.000000j
DSS results
                            A                   B                   C
sourcebus  0.999997-0.000006j -0.500003-0.866021j -0.499995+0.866026j
a01        0.998590+0.002711j -0.498318-0.868226j -0.502980+0.863358j
a02        0.997184+0.005429j -0.496633-0.870431j -0.505965+0.860691j
a03        0.994507+0.009171j -0.494798-0.874114j -0.510544+0.856330j
a04        0.995739+0.009203j  0.000000+0.000000j -0.510559+0.853678j
a05        0.991052+0.011296j -0.495939-0.875729j  0.000000+0.000000j
a06        0.000000+0.000000j -0.495835-0.875253j  0.000000+0.000000j

COMPARE I
Max |diff|:
A.(fbs - dss)    0.000288
B.(fbs - dss)    0.006977
C.(fbs - dss)    0.000046
dtype: float64
                   A.(fbs - dss)       B.(fbs - dss)       C.(fbs - dss)
line_sub_a01 -0.000061+0.000257j -0.006089+0.003406j  0.000036-0.000022j
line_a01_a02 -0.000061+0.000277j -0.006072+0.003396j  0.000019-0.000032j
line_a02_a03 -0.000055+0.000282j -0.006057+0.003393j -0.000013-0.000040j
line_a03_a04 -0.000015+0.000010j  0.000000+0.000000j  0.000045+0.000009j
line_a03_a05 -0.000021+0.000049j -0.005892+0.003309j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j -0.005883+0.003318j  0.000000+0.000000j
FBS results
                               A                   B                   C
line_sub_a01  0.453507-0.101387j -0.238300-0.265402j -0.106186+0.286936j
line_a01_a02  0.453507-0.101387j -0.238300-0.265402j -0.106186+0.286936j
line_a02_a03  0.353097-0.076878j -0.167183-0.191087j -0.077028+0.187902j
line_a03_a04  0.100639-0.024149j  0.000000+0.000000j -0.030000+0.099177j
line_a03_a05  0.151886-0.048654j -0.113814-0.106886j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j -0.043239-0.032645j  0.000000+0.000000j
DSS results
                               A                   B                   C
line_sub_a01  0.453568-0.101645j -0.232211-0.268808j -0.106222+0.286958j
line_a01_a02  0.453568-0.101664j -0.232228-0.268798j -0.106205+0.286968j
line_a02_a03  0.353153-0.077160j -0.161126-0.194480j -0.077015+0.187942j
line_a03_a04  0.100654-0.024159j  0.000000+0.000000j -0.030045+0.099168j
line_a03_a05  0.151906-0.048702j -0.107922-0.110195j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j -0.037357-0.035964j  0.000000+0.000000j

COMPARE Stx
Max |diff|:
A.(fbs - dss)    0.000261
B.(fbs - dss)    0.006979
C.(fbs - dss)    0.000058
dtype: float64
                   A.(fbs - dss)       B.(fbs - dss)       C.(fbs - dss)
line_sub_a01 -0.000060-0.000254j  0.000096+0.006978j -0.000037+0.000022j
line_a01_a02 -0.000046-0.000243j  0.000069+0.006975j -0.000025-0.000017j
line_a02_a03 -0.000031-0.000232j  0.000042+0.006971j -0.000012-0.000057j
line_a03_a04 -0.000003+0.000018j -0.000000+0.000000j  0.000003+0.000018j
line_a03_a05 -0.000005-0.000004j  0.000005+0.006802j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j  0.000002+0.006804j  0.000000+0.000000j
FBS results
                               A                   B                   C
line_sub_a01  0.453507+0.101387j  0.348995+0.073672j  0.301587+0.051509j
line_a01_a02  0.452608+0.102508j  0.349170+0.074654j  0.301151+0.052629j
line_a02_a03  0.351708+0.078628j  0.249344+0.050635j  0.200714+0.028749j
line_a03_a04  0.099877+0.024967j -0.000000+0.000000j  0.100263+0.024919j
line_a03_a05  0.150621+0.049824j  0.149728+0.046614j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j  0.050023+0.021682j  0.000000+0.000000j
DSS results
                               A                   B                   C
line_sub_a01  0.453568+0.101641j  0.348900+0.066694j  0.301624+0.051487j
line_a01_a02  0.452653+0.102751j  0.349101+0.067679j  0.301175+0.052646j
line_a02_a03  0.351739+0.078860j  0.249302+0.043664j  0.200727+0.028806j
line_a03_a04  0.099880+0.024949j  0.000000+0.000000j  0.100260+0.024901j
line_a03_a05  0.150625+0.049828j  0.149723+0.039812j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j  0.050021+0.014878j  0.000000+0.000000j

COMPARE Srx
Max |diff|:
A.(fbs - dss)    0.000247
B.(fbs - dss)    0.006980
C.(fbs - dss)    0.000103
dtype: float64
                           A.(fbs - dss)  ...               C.(fbs - dss)
line_sub_a01 -4.557709e-05-2.431930e-04j  ... -2.454567e-05-1.743002e-05j
line_a01_a02 -3.070547e-05-2.319565e-04j  ... -1.239742e-05-5.673168e-05j
line_a02_a03 -7.516521e-06-2.033427e-04j  ...  2.984299e-06-1.029207e-04j
line_a03_a04 -3.178013e-15+5.103556e-15j  ...  2.498002e-16-7.320533e-16j
line_a03_a05  8.576473e-15-3.740064e-15j  ...  0.000000e+00+0.000000e+00j
line_a05_a06  0.000000e+00+0.000000e+00j  ...  0.000000e+00+0.000000e+00j

[6 rows x 3 columns]
FBS results
                               A                   B                   C
line_sub_a01  0.452608+0.102508j  0.349170+0.074654j  0.301151+0.052629j
line_a01_a02  0.451708+0.103628j  0.349344+0.075635j  0.300714+0.053749j
line_a02_a03  0.350498+0.079791j  0.249728+0.051614j  0.200263+0.029919j
line_a03_a04  0.100000+0.025000j  0.000000-0.000000j  0.100000+0.025000j
line_a03_a05  0.150000+0.050000j  0.150023+0.046682j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j  0.050000+0.021667j  0.000000+0.000000j
DSS results
                               A                   B                   C
line_sub_a01  0.452653+0.102751j  0.349101+0.067679j  0.301175+0.052646j
line_a01_a02  0.451739+0.103860j  0.349302+0.068664j  0.300727+0.053806j
line_a02_a03  0.350505+0.079994j  0.249723+0.044634j  0.200260+0.030022j
line_a03_a04  0.100000+0.025000j  0.000000+0.000000j  0.100000+0.025000j
line_a03_a05  0.150000+0.050000j  0.150021+0.039878j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j  0.050000+0.014881j  0.000000+0.000000j


Testing File: powerflowpy/tests/06n3ph_rad_unbal/06node_threephase_radial_unbalanced.dss
OpenDSS Loads after solving, from dss.CktElement.Powers():
[49.999463880451074, 24.99983366814471, 0.0, 0.0]

Opendss Iterations: 2	Opendss Convergence: 1e-12
OpenDSS Loads after solving, from dss.CktElement.Powers():
[50.05165164366915, 14.721408302828596, -49.999999999996284, -14.728655167610428]
FBS iterations: 7	 FBS convergence:1.2107197065235484e-10	 FBS tolerance: 1e-09

COMPARE V
Max |diff|:
A.(fbs - dss)    0.001010
B.(fbs - dss)    0.000671
C.(fbs - dss)    0.000686
dtype: float64
                A.(fbs - dss)       B.(fbs - dss)       C.(fbs - dss)
sourcebus  0.000003+0.000006j  0.000003-0.000004j -0.000005-0.000001j
a01        0.000049+0.000066j  0.000043-0.000001j  0.000046+0.000063j
a02        0.000164+0.000217j  0.000142+0.000008j  0.000172+0.000221j
a03        0.000391+0.000519j  0.000340+0.000029j  0.000426+0.000537j
a04        0.000392+0.000514j  0.000000-0.000000j  0.000427+0.000537j
a05        0.000604+0.000810j  0.000508+0.000046j -0.000000+0.000000j
a06        0.000000+0.000000j  0.000668+0.000060j -0.000000+0.000000j
FBS results
                            A                   B                   C
sourcebus  1.000000-0.000000j -0.500000-0.866025j -0.500000+0.866025j
a01        0.998626+0.002759j -0.498256-0.868238j -0.502898+0.863349j
a02        0.995191+0.009657j -0.493898-0.873770j -0.510143+0.856658j
a03        0.988672+0.019218j -0.489028-0.883026j -0.521172+0.845743j
a04        0.991773+0.019368j  0.000000-0.000000j -0.521124+0.839094j
a05        0.980198+0.024660j -0.491694-0.887202j -0.000000+0.000000j
a06        0.000000+0.000000j -0.491288-0.886006j -0.000000+0.000000j
DSS results
                            A                   B                   C
sourcebus  0.999997-0.000006j -0.500003-0.866021j -0.499995+0.866026j
a01        0.998577+0.002693j -0.498299-0.868237j -0.502944+0.863286j
a02        0.995028+0.009440j -0.494040-0.873778j -0.510315+0.856437j
a03        0.988280+0.018698j -0.489369-0.883055j -0.521598+0.845206j
a04        0.991381+0.018854j  0.000000+0.000000j -0.521551+0.838557j
a05        0.979595+0.023850j -0.492202-0.887248j  0.000000+0.000000j
a06        0.000000+0.000000j -0.491956-0.886066j  0.000000+0.000000j

COMPARE I
Max |diff|:
A.(fbs - dss)    0.000611
B.(fbs - dss)    0.007343
C.(fbs - dss)    0.000110
dtype: float64
                   A.(fbs - dss)       B.(fbs - dss)       C.(fbs - dss)
line_sub_a01 -0.000146+0.000553j -0.006463+0.003485j  0.000073-0.000048j
line_a01_a02 -0.000146+0.000573j -0.006446+0.003475j  0.000056-0.000057j
line_a02_a03 -0.000134+0.000596j -0.006407+0.003465j -0.000015-0.000080j
line_a03_a04 -0.000036+0.000017j  0.000000+0.000000j  0.000106+0.000027j
line_a03_a05 -0.000051+0.000111j -0.006044+0.003286j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j -0.006019+0.003307j  0.000000+0.000000j
FBS results
                               A                   B                   C
line_sub_a01  0.457422-0.097593j -0.235023-0.265817j -0.110209+0.286697j
line_a01_a02  0.457422-0.097593j -0.235023-0.265817j -0.110209+0.286697j
line_a02_a03  0.356705-0.073450j -0.164313-0.191339j -0.080436+0.187694j
line_a03_a04  0.101283-0.023229j  0.000000+0.000000j -0.031912+0.099357j
line_a03_a05  0.154216-0.047130j -0.111983-0.107073j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j -0.042637-0.032791j  0.000000+0.000000j
DSS results
                               A                   B                   C
line_sub_a01  0.457568-0.098147j -0.228559-0.269301j -0.110282+0.286744j
line_a01_a02  0.457568-0.098167j -0.228577-0.269292j -0.110265+0.286754j
line_a02_a03  0.356839-0.074046j -0.157906-0.194804j -0.080421+0.187774j
line_a03_a04  0.101319-0.023246j  0.000000+0.000000j -0.032019+0.099330j
line_a03_a05  0.154267-0.047241j -0.105939-0.110359j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j -0.036618-0.036098j  0.000000+0.000000j

COMPARE Stx
Max |diff|:
A.(fbs - dss)    0.000569
B.(fbs - dss)    0.007345
C.(fbs - dss)    0.000109
dtype: float64
                   A.(fbs - dss)       B.(fbs - dss)       C.(fbs - dss)
line_sub_a01 -0.000145-0.000550j  0.000214+0.007342j -0.000077+0.000041j
line_a01_a02 -0.000128-0.000538j  0.000186+0.007340j -0.000065-0.000001j
line_a02_a03 -0.000086-0.000505j  0.000113+0.007336j -0.000033-0.000104j
line_a03_a04 -0.000007+0.000045j -0.000000+0.000000j  0.000007+0.000045j
line_a03_a05 -0.000013-0.000012j  0.000015+0.006978j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j  0.000005+0.006983j  0.000000+0.000000j
FBS results
                               A                   B                   C
line_sub_a01  0.457422+0.097593j  0.347716+0.070627j  0.303391+0.047904j
line_a01_a02  0.456525+0.098721j  0.347894+0.071611j  0.302944+0.049030j
line_a02_a03  0.354280+0.076541j  0.248340+0.049070j  0.201824+0.026845j
line_a03_a04  0.099689+0.024913j -0.000000+0.000000j  0.100662+0.024793j
line_a03_a05  0.151563+0.049560j  0.149311+0.046522j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j  0.050057+0.021704j  0.000000+0.000000j
DSS results
                               A                   B                   C
line_sub_a01  0.457567+0.098144j  0.347501+0.063286j  0.303469+0.047863j
line_a01_a02  0.456653+0.099259j  0.347708+0.064271j  0.303008+0.049031j
line_a02_a03  0.354366+0.077047j  0.248227+0.041734j  0.201857+0.026949j
line_a03_a04  0.099697+0.024868j  0.000000+0.000000j  0.100655+0.024748j
line_a03_a05  0.151576+0.049572j  0.149296+0.039544j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j  0.050052+0.014721j  0.000000+0.000000j

COMPARE Srx
Max |diff|:
A.(fbs - dss)    0.000553
B.(fbs - dss)    0.007364
C.(fbs - dss)    0.000227
dtype: float64
                           A.(fbs - dss)  ...               C.(fbs - dss)
line_sub_a01 -1.279135e-04-5.375332e-04j  ... -6.472204e-05-5.543930e-07j
line_a01_a02 -8.573214e-05-5.053516e-04j  ... -3.295798e-05-1.040141e-04j
line_a02_a03 -2.022762e-05-4.264452e-04j  ...  7.420490e-06-2.264730e-04j
line_a03_a04 -1.956768e-15+2.851885e-15j  ...  1.623701e-15-4.007211e-15j
line_a03_a05  1.415534e-15+2.331468e-15j  ...  0.000000e+00+0.000000e+00j
line_a05_a06  0.000000e+00+0.000000e+00j  ...  0.000000e+00+0.000000e+00j

[6 rows x 3 columns]
FBS results
                               A                   B                   C
line_sub_a01  0.456525+0.098721j  0.347894+0.071611j  0.302944+0.049030j
line_a01_a02  0.454280+0.101541j  0.348340+0.074070j  0.301824+0.051845j
line_a02_a03  0.351253+0.079473j  0.249311+0.051522j  0.200662+0.029793j
line_a03_a04  0.100000+0.025000j  0.000000-0.000000j  0.100000+0.025000j
line_a03_a05  0.150000+0.050000j  0.150057+0.046704j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j  0.050000+0.021667j  0.000000+0.000000j
DSS results
                               A                   B                   C
line_sub_a01  0.456653+0.099259j  0.347708+0.064271j  0.303008+0.049031j
line_a01_a02  0.454366+0.102047j  0.348227+0.066734j  0.301857+0.051949j
line_a02_a03  0.351273+0.079899j  0.249296+0.044159j  0.200655+0.030019j
line_a03_a04  0.100000+0.025000j  0.000000+0.000000j  0.100000+0.025000j
line_a03_a05  0.150000+0.050000j  0.150052+0.039721j  0.000000+0.000000j
line_a05_a06  0.000000+0.000000j  0.050000+0.014729j  0.000000+0.000000j
.

=============================== warnings summary ===============================
tests/test_compare_opendss.py::test_all
tests/test_compare_opendss.py::test_all
  /Users/elainelaguerta/Dropbox/LBNL/LinDist3Flow/powerflowpy/powerflowpy/solution.py:134: RuntimeWarning: invalid value encountered in true_divide
    new_line_I = np.conj(np.divide(node_s, node_V)) # TODO: consider dividing manually only by phases on the node

tests/test_compare_opendss.py::test_all
tests/test_compare_opendss.py::test_all
  /Users/elainelaguerta/Dropbox/LBNL/LinDist3Flow/powerflowpy/powerflowpy/solution.py:181: RuntimeWarning: invalid value encountered in true_divide
    node_I = np.conj(np.divide(node_sV,node_V))

-- Docs: https://docs.pytest.org/en/stable/warnings.html
======================== 1 passed, 4 warnings in 1.06s =========================
